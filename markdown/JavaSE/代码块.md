# 代码块

## 是什么

代码块 又叫 初始化块，属于类中的成员（也就是类中的一部分），类似于方法，将逻辑语句封装在代码块中，通过{}包围起来



## 与方法的区别

没有方法名、返回、参数

方法体，不用考虑对象或者类显示调用，而是加载类的时候，或创建对象的时候**隐式调用**



## 语法

[修饰符]{

代码

};



修饰符只能写static

最后的分号可以忽略



## 分类

1.static修饰的叫静态代码块

2.没有修饰的叫普通代码块/非静态代码块



## 用法

相当于是另外一个形式的构造器，可以做初始化操作

比如如果多个构造器中都有重复的语句，可以抽取到初始化块中，提高代码的复用性

当我们不管调用哪个构造器，创建对象都会先调用代码块的内容

代码块调用的顺序优先于构造器



**注意：static代码块，只会在类的加载时执行一次，非static会在每个对象创建时，都调用一次**

> 类信息什么时候会被加载
>
> 1.创建对象实例 （new）
>
> 2.创建子类对象实例，父类会被加载（A extends B时候，先加载B再加载A）
>
> 3.使用类的静态成员时（静态属性，静态方法）



## 创建对象调用顺序

1.调用静态代码和静态属性的初始化

2.调用普通代码块和普通属性的初始化

3.调用构造函数



静态代码块和静态属性的优先级是一样的，先后取决于代码顺序

例如图：先输出get N1 再输出 A

![image-20220419145716845](/Users/chenyonglin/Desktop/markdown/image/image-20220419145716845.png)



调用普通代码块和普通属性的初始化 优先级一样，如果有多个代码块和多个普通属性要进行初始化，按定义顺序调用

![image-20220419150403217](/Users/chenyonglin/Desktop/markdown/image/image-20220419150403217.png)

先输出A，再调用n2



如果是有继承的状态下

![image-20220419152041412](/Users/chenyonglin/Desktop/markdown/image/image-20220419152041412.png)



先执行AAA的普通代码块， 再AAA的构造器，再执行BBB的代码块，最后执行BBB的构造器



 加上静态代码块和静态属性，则是

<!--*因为必要进行类加载，所以静态代码块肯定是先进行的*-->

1.父类的静态代码块和静态属性

2.子类的静态代码块和静态属性

<!--*后进行对象调用，则遵守先父后子，先代码后构造的规则*-->

3.父类的普通代码块和普通属性初始化

4.父类的构造方法（构造方法里隐藏了一个super()和调用普通代码块，最后执行构造器内容）

5.子类的普通代码块和普通属性初始化

6.子类的构造方法



静态属性先调用，先父后子，同类看顺序

普通代码块和构造后跳用，先父后子，同类看顺序

静态代码只能调用静态成员，普通代码都可以调用

