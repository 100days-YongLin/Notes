# ä»‹ç»

## é¢å‘å¯¹è±¡ç¼–ç¨‹

Scalaæ˜¯ä¸€é—¨å®Œå…¨é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œä¸‡ç‰©çš†å¯¹è±¡

å¯¹è±¡çš„æœ¬è´¨ï¼šå¯¹æ•°æ®å’Œè¡Œä¸ºè¿›è¡Œå°è£…



## å‡½æ•°å¼ç¼–ç¨‹

å‘½ä»¤å¼ç¼–ç¨‹ï¼šæ‰€æœ‰çš„è¯­æ³•éƒ½æ˜¯é¢å‘è®¡ç®—æœºç¡¬ä»¶çš„æŠ½è±¡

å‡½æ•°å¼ç¼–ç¨‹ï¼šèƒ½ç”¨å¸¸é‡å°±ç”¨å¸¸é‡ï¼Œæœ¬è´¨æ˜¯æ˜ å°„å…³ç³» y = f(x) é è¿‘æ•°å­¦çš„ç†è§£æ–¹æ³• å¾—åˆ°çš„ç»“æœæ˜¯ç¡®å®šæ€§çš„

é€‚åˆç”¨åœ¨å¤§æ•°æ®é‡Œï¼Œå¹¶è¡Œå¤„ç†



# å‡½æ•°åŸºæœ¬è¯­æ³•

![image-20220812161436561](picture/image-20220812161436561.png)

ï¼ˆ1ï¼‰Scala è¯­è¨€å¯ä»¥åœ¨ä»»ä½•çš„è¯­æ³•ç»“æ„ä¸­å£°æ˜ä»»ä½•çš„è¯­æ³•

ï¼ˆ2ï¼‰å‡½æ•°æ²¡æœ‰é‡è½½å’Œé‡å†™çš„æ¦‚å¿µï¼›æ–¹æ³•å¯ä»¥è¿›è¡Œé‡è½½å’Œé‡å†™

ï¼ˆ3ï¼‰Scala ä¸­å‡½æ•°å¯ä»¥åµŒå¥—å®šä¹‰



## å‡½æ•°å’Œæ–¹æ³•åŒºåˆ«

ï¼ˆ1ï¼‰ä¸ºå®ŒæˆæŸä¸€åŠŸèƒ½çš„ç¨‹åºè¯­å¥çš„é›†åˆï¼Œç§°ä¸ºå‡½æ•°ã€‚

ï¼ˆ2ï¼‰ç±»ä¸­çš„å‡½æ•°ç§°ä¹‹æ–¹æ³•ã€‚



```SCALA
package chapter05

object Test01_FunctionAndMethod {
  def main(args: Array[String]): Unit = {
    //ç‹­ä¹‰å‡½æ•°
    def sayHi(name : String) : Unit = {
      println("ğŸ‘‹ æˆ‘æ˜¯ï¼š" + name)
    }

    sayHi("Alice")

    //è°ƒç”¨å¯¹è±¡æ–¹æ³•
    Test01_FunctionAndMethod.sayHi("Alice")
  }

  //å¹¿ä¹‰å‡½æ•°
  def sayHi(name : String) : Unit = {
    println("ğŸ‘‹ æˆ‘åœ¨å¤–é¢ï¼Œæˆ‘æ˜¯ï¼š" + name)
  }
}
```



è¾“å‡º

```
ğŸ‘‹ æˆ‘æ˜¯ï¼šAlice
ğŸ‘‹ æˆ‘åœ¨å¤–é¢ï¼Œæˆ‘æ˜¯ï¼šAlice
```



## å‡½æ•°å®šä¹‰

```scala
//å‡½æ•°1ï¼šæ— å‚ æ— è¿”å›å€¼ return Unit ()
def f1() : Unit = {
  println("å‡½æ•°1ï¼šæ— å‚ æ— è¿”å›å€¼")
}

//å‡½æ•°2ï¼šæ— å‚ æœ‰è¿”å›å€¼
def f2() : Int = {
  println("å‡½æ•°2ï¼šæ— å‚ æœ‰è¿”å›å€¼")
  return 12
}

//å‡½æ•°3ï¼šæœ‰å‚æ•° æ— è¿”å›å€¼
def f3(name : String) : Unit = {
  println("å‡½æ•°3ï¼šæœ‰å‚æ•° æ— è¿”å›å€¼" + name)
}

//å‡½æ•°4ï¼šæœ‰å‚æ•° æœ‰è¿”å›å€¼
def f4(name : String) : String = {
  println("å‡½æ•°3ï¼šæœ‰å‚æ•° æ— è¿”å›å€¼" + name)
  return "Hi~" + name
}

//å‡½æ•°5ï¼šå¤šå‚ï¼Œæ— è¿”å›å€¼
def f5(name : String , name2 : String) : Unit = {
  println("å‡½æ•°3ï¼šæœ‰å‚æ•° æ— è¿”å›å€¼" + name + name2)
}

//å‡½æ•°6ï¼šå¤šå‚ï¼Œæœ‰è¿”å›å€¼
def f4(name : String, name2 : String) : String = {
  println("å‡½æ•°3ï¼šæœ‰å‚æ•° æ— è¿”å›å€¼" + name)
  return "Hi~" + name + " and " +name2
}
```



## å‡½æ•°å‚æ•°

**å¯å˜å‚æ•°**

```scala
def f1 (str : String*): Unit ={
  println(str)
}

f1("Alice")
f1("aaa", "bbb", "ccc")
```

æ­¤æ—¶è¾“å‡º

```
WrappedArray(Alice)
WrappedArray(aaa, bbb, ccc)
```



**å¤šä¸ªå‚æ•°ï¼Œå¯å˜å‚æ•°æ”¾æœ€å**

```scala
def f2 (count : Int , str1 : String ,  str : String*): Unit ={
  println(count +str1+ str)
}

f2(1," sayhi ",   "Alice")
f2(3, " sayhi ", "aaa", "bbb", "ccc")
```

æ­¤æ—¶è¾“å‡º

```
1 sayhi WrappedArray(Alice)
3 sayhi WrappedArray(aaa, bbb, ccc)
```



**å‚æ•°é»˜è®¤å€¼ï¼Œä¸€èˆ¬æ”¾åœ¨å‚æ•°åˆ—è¡¨åé¢**

```scala
def f3 (str : String = "atguigu") : Unit = {
  println(str)
}
```

æ­¤æ—¶è¾“å‡º

```
atguigu
nonono
```



## å¸¦åå‚æ•°

```scala
def f4(name : String , age : Int) : Unit = {
  println(s"${age}å²çš„${name}åœ¨sggå­¦ä¹ ")
}

f4("alice", 20)
f4(age = 21, name = "Bob")
```

æ­¤æ—¶è¾“å‡º

```
f4("alice", 20)
f4(age = 21, name = "Bob")
```



# å‡½æ•°è‡³ç®€åŸåˆ™

ï¼ˆ1ï¼‰return å¯ä»¥çœç•¥ï¼ŒScala ä¼šä½¿ç”¨å‡½æ•°ä½“çš„æœ€åä¸€è¡Œä»£ç ä½œä¸ºè¿”å›å€¼

ï¼ˆ2ï¼‰å¦‚æœå‡½æ•°ä½“åªæœ‰ä¸€è¡Œä»£ç ï¼Œå¯ä»¥çœç•¥èŠ±æ‹¬å·

ï¼ˆ3ï¼‰è¿”å›å€¼ç±»å‹å¦‚æœèƒ½å¤Ÿæ¨æ–­å‡ºæ¥ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥ï¼ˆ:å’Œè¿”å›å€¼ç±»å‹ä¸€èµ·çœç•¥ï¼‰

ï¼ˆ4ï¼‰å¦‚æœæœ‰ returnï¼Œåˆ™ä¸èƒ½çœç•¥è¿”å›å€¼ç±»å‹ï¼Œå¿…é¡»æŒ‡å®š

ï¼ˆ5ï¼‰å¦‚æœå‡½æ•°æ˜ç¡®å£°æ˜ unitï¼Œé‚£ä¹ˆå³ä½¿å‡½æ•°ä½“ä¸­ä½¿ç”¨ return å…³é”®å­—ä¹Ÿä¸èµ·ä½œç”¨

ï¼ˆ6ï¼‰Scala å¦‚æœæœŸæœ›æ˜¯æ— è¿”å›å€¼ç±»å‹ï¼Œå¯ä»¥çœç•¥ç­‰å·

ï¼ˆ7ï¼‰å¦‚æœå‡½æ•°æ— å‚ï¼Œä½†æ˜¯å£°æ˜äº†å‚æ•°åˆ—è¡¨ï¼Œé‚£ä¹ˆè°ƒç”¨æ—¶ï¼Œå°æ‹¬å·ï¼Œå¯åŠ å¯ä¸åŠ 

ï¼ˆ8ï¼‰å¦‚æœå‡½æ•°æ²¡æœ‰å‚æ•°åˆ—è¡¨ï¼Œé‚£ä¹ˆå°æ‹¬å·å¯ä»¥çœç•¥ï¼Œè°ƒç”¨æ—¶å°æ‹¬å·å¿…é¡»çœç•¥

ï¼ˆ9ï¼‰å¦‚æœä¸å…³å¿ƒåç§°ï¼Œåªå…³å¿ƒé€»è¾‘å¤„ç†ï¼Œé‚£ä¹ˆå‡½æ•°åï¼ˆdefï¼‰å¯ä»¥çœç•¥



```SCALA
package chapter05

object Test04_Simplify {
  def main(args: Array[String]): Unit = {
    def f0(name : String) : String = {
      name  // 1.ä¸éœ€è¦ä¸“é—¨return ä¸€èˆ¬æ¥è¯´æœ€åä¸€è¡Œçš„å€¼ä½œä¸ºè¿”å›å€¼
    }

    println(f0("111"))

    def f1(name : String) : String = name //2.å¦‚æœä»£ç å—åªæœ‰ä¸€è¡Œ å¯å»é™¤èŠ±æ‹¬å·

    def f2(name : String) = name //3.å¦‚æœè¿”å›å€¼å¯ä»¥æ¨æ–­å‡ºï¼Œåˆ™ä¸éœ€è¦å†™è¿”å›å€¼ç±»å‹

    //ç®€åŒ–åˆ°è¿™é‡Œï¼Œå°±ç®€åŒ–æˆäº†ä¸€ä¸ªæ•°å­¦ä¸Šçš„å‡½æ•°ï¼Œèƒ½çœ‹å¾—å‡ºæ¥æ•°æ®çš„æ˜ å°„å…³ç³»

    def f4(name : String) : String = {
      return name  //4.å¦‚æœæœ‰returnï¼Œä¸èƒ½çœç•¥è¿”å›å€¼ç±»å‹
    }

    def f5(name : String) : Unit = {
      return name//5.å¦‚æœå‡½æ•°å£°æ˜äº†è¿”å›å€¼æ˜¯Unitï¼Œå‡½æ•°ä½“ä¸­çš„returnå…³é”®å­—ä¸èµ·ä½œç”¨
    }

    def f6(name : String){  //6.å¦‚æœè¿”å›å€¼ä¸ºUnitï¼Œå¯ä»¥çœç•¥ç­‰å·
      println(name)
    }

    def f7():Unit={
      println("121")
    }

    f7 // 7.å¦‚æœå‡½æ•°æ— å‚æ•°ï¼Œä½†æ˜¯å£°æ˜äº†å‚æ•°åˆ—è¡¨ï¼Œè°ƒç”¨å¯ä»¥çœç•¥å°æ‹¬å·

    def f8 : Unit = { //8.å¦‚æœå‡½æ•°æ²¡æœ‰å‚æ•°åˆ—è¡¨ï¼Œå°æ‹¬å·å¯ä»¥çœç•¥ï¼Œè°ƒç”¨æ—¶å°æ‹¬å·å¿…é¡»çœç•¥
      println("333")
    }
    
    f8
    
    def f9(name : String) = {
      println(name)
    }

    (name : String) => { println(name) } //9.å¦‚æœä¸å…³å¿ƒåç§°ï¼Œåªå…³å¿ƒé€»è¾‘å¤„ç†ï¼Œdefå¯ä»¥çœç•¥ åŒ¿åå‡½æ•°
      
  }
}
```



# åŒ¿åå‡½æ•° Lambdaè¡¨è¾¾å¼

æ²¡æœ‰åå­—çš„å‡½æ•°å°±æ˜¯åŒ¿åå‡½æ•°ã€‚

(x:Int)=>{å‡½æ•°ä½“} 

xï¼šè¡¨ç¤ºè¾“å…¥å‚æ•°ç±»å‹ï¼›Intï¼šè¡¨ç¤ºè¾“å…¥å‚æ•°ç±»å‹ï¼›å‡½æ•°ä½“ï¼šè¡¨ç¤ºå…·ä½“ä»£ç é€»è¾‘



èƒ½æŠŠæ•´ä¸ªå‡½æ•°ä½œä¸ºä¸€ä¸ªå€¼èµ‹ç»™å˜é‡

```scala
val fun = (name : String) => {println(name)}  //èƒ½æŠŠæ•´ä¸ªå‡½æ•°ä½œä¸ºä¸€ä¸ªå€¼èµ‹ç»™å˜é‡ çš„ åŒ¿åå‡½æ•°

//å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä»¥å‡½æ•°ä½œä¸ºè¾“å…¥

def f(func: String => Unit) : Unit = {
  func("nihao")
}

f(fun)
```

åŒ¿åå‡½æ•°çš„å½¢å¼å°±æ˜¯ (å½¢å‚) => {æ–¹æ³•ä½“}



æ³¨æ„ï¼Œè¿™é‡Œf() çš„å½¢å¼å‚æ•°æ˜¯String =>Unit è¡¨ç¤ºä¸€ä¸ª åŒ¿åå‡½æ•° ä¼ å…¥String å¹¶ä¸”è¿”å›å€¼æ˜¯Unitçš„



## åŒ¿åå‡½æ•° è‡³ç®€åŸåˆ™

ï¼ˆ1ï¼‰å‚æ•°çš„ç±»å‹å¯ä»¥çœç•¥ï¼Œä¼šæ ¹æ®å½¢å‚è¿›è¡Œè‡ªåŠ¨çš„æ¨å¯¼

ï¼ˆ2ï¼‰ç±»å‹çœç•¥ä¹‹åï¼Œå‘ç°åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œåˆ™åœ†æ‹¬å·å¯ä»¥çœç•¥ï¼›å…¶ä»–æƒ…å†µï¼šæ²¡æœ‰å‚æ•°å’Œå‚æ•°è¶…è¿‡ 1 çš„æ°¸è¿œä¸èƒ½çœç•¥åœ†æ‹¬å·ã€‚ 

ï¼ˆ3ï¼‰åŒ¿åå‡½æ•°å¦‚æœåªæœ‰ä¸€è¡Œï¼Œåˆ™å¤§æ‹¬å·ä¹Ÿå¯ä»¥çœç•¥

ï¼ˆ4ï¼‰å¦‚æœå‚æ•°åªå‡ºç°ä¸€æ¬¡ï¼Œåˆ™å‚æ•°çœç•¥ä¸”åé¢å‚æ•°å¯ä»¥ç”¨_ä»£æ›¿

```scala
package chapter05

object Test05_Lambda {
  def main(args: Array[String]): Unit = {

    //å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä»¥å‡½æ•°ä½œä¸ºè¾“å…¥
    def f(func: String => Unit) : Unit = {
      func("nihao")
    }
    

    //åŒ¿åå‡½æ•°çš„ç®€åŒ–åŸåˆ™
    //1.å‚æ•°çš„ç±»å‹å¯ä»¥çœç•¥ï¼Œä¼šæ ¹æ®å½¢å‚æ•°è‡ªåŠ¨æ¨å€’
    f( (name) => {println(name)} )

    //2.å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ‹¬å·å¯çœç•¥
    f( name => {println(name)} )

    //3.å¦‚æœå‡½æ•°ä½“åªæœ‰ä¸€è¡Œï¼Œå¤§æ‹¬å·å¯çœç•¥
    f( x => println(x) )

    //4 å¦‚æœå‚æ•°åªå‡ºç°ä¸€æ¬¡ï¼Œå‚æ•°çœç•¥ï¼Œå¹¶ç”¨_æ›¿ä»£
    f( println(_) )

    //5.å¦‚æœå¯ä»¥æ¨æ–­å‡ºå½“å‰ä¼ å…¥çš„ printlnæ˜¯ä¸€ä¸ªå‡½æ•°ä½“ï¼Œä¸æ˜¯ä¸€ä¸ªè°ƒç”¨è¯­å¥ï¼Œå°±å¯ä»¥ç›´æ¥çœç•¥ä¸‹åˆ’çº¿
    f ( println )

  }
}
```



## æ¡ˆä¾‹

```scala
// å®é™…ç¤ºä¾‹ï¼šå®šä¹‰ä¸€ä¸ª"äºŒå…ƒè¿ç®—"å‡½æ•°ï¼Œåªæ“ä½œ1å’Œ2ä¸¤ä¸ªæ•°ï¼Œä½†æ˜¯å…·ä½“è¿ç®—é€šè¿‡å‚æ•°ä¼ å…¥

def dualFunctionOneAndTwo(fun : (Int, Int) => Int) = {
  fun(1, 2)
}

val add = (a : Int , b : Int) => a + b
val minus = (a : Int , b : Int) => a - b

println(dualFunctionOneAndTwo(add))
println(dualFunctionOneAndTwo(minus))
```

ç®€åŒ–ä¸€ä¸‹

```scala
//ç®€åŒ–
println(dualFunctionOneAndTwo(_ + _))
println(dualFunctionOneAndTwo(_ - _))
```



# å‡½æ•°é«˜çº§åº”ç”¨

## å‡½æ•°ä½œä¸ºå€¼è¿›è¡Œä¼ é€’

```scala
def f(n : Int) : Int = {
  println("fè°ƒç”¨")
  n + 1
}

def fun () : Unit = println("FUNè°ƒç”¨")

//1.å‡½æ•°ä½œä¸ºå€¼è¿›è¡Œä¼ é€’
val f1 : Int => Int = f //è¡¨ç¤ºfæœ¬èº«è¿™ä¸ªå‡½æ•°
val f2 = f _ // å¦‚æœæ²¡å†™å˜é‡ç±»å‹ï¼Œå¯ç›´æ¥ä¸‹åˆ’çº¿è¡¨ç¤ºæ˜¯ä¸€ä¸ªå‡½æ•°æœ¬èº«è€Œä¸æ˜¯è°ƒç”¨
println(f1) // è¾“å‡ºä¸€ä¸ªé¥®ç”¨
println(f1(1))  // ç›´æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°
println(f2)
println(f2(2))

val f3 = fun _
```



## å‡½æ•°ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’

```scala
//2.å‡½æ•°ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’
def dualEval(op : (Int, Int) => Int, a : Int , b : Int) : Int = {
  op(a, b)
}

def add (a : Int, b:Int) : Int = a + b
def minus (a : Int, b:Int) : Int = a - b

println(dualEval(add, 1, 2))
println(dualEval( (a, b) => a + b, 2, 3))
println(dualEval( (_ + _) , 4 , 5))
```



## å‡½æ•°ä½œä¸ºè¿”å›å€¼è¿”å›

```SCALA
//3. å‡½æ•°ä½œä¸ºè¿”å›å€¼è¿”å›
def f5 () : Int => Unit = {
  def f6(a : Int): Unit = println("f6è°ƒç”¨" + a)
  f6 // å°†å‡½æ•°ç›´æ¥è¿”å›
}

println(f5) // å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå‡½æ•°çš„å¼•ç”¨
val f66 = f5
f66(25) // å¯ä»¥é…±ç´«è°ƒç”¨
f5()(11)  // ä¹Ÿå¯ä»¥é…±ç´«è°ƒç”¨
```



## æ¡ˆä¾‹

1.å¯¹æ•°ç»„è¿›è¡Œå¤„ç†ï¼Œå°†æ“ä½œæŠ½è±¡å‡ºæ¥ï¼Œå¤„ç†å®Œæ¯•åç»“æœè¿”å›ä¸€ä¸ªæ–°çš„æ•°å­—

```scala
val arr:Array[Int] = Array(12, 45, 75, 98)

 // å¯¹æ•°ç»„è¿›è¡Œå¤„ç†ï¼Œå°†æ“ä½œæŠ½è±¡å‡ºæ¥ï¼Œå¤„ç†å®Œæ¯•åç»“æœè¿”å›ä¸€ä¸ªæ–°çš„æ•°å­—
def arrayOperation(array: Array[Int], op :Int => Int) : Array[Int] = {
  for (elem <- array) yield op(elem)
}

//å®šä¹‰ä¸€ä¸ª + 1 æ“ä½œ
def addOne(elem : Int) : Int = {
  elem + 1
}

val newArray : Array[Int] = arrayOperation(arr, addOne)
println(newArray.mkString(",")) //æ¯ä¸ªå…ƒç´ é€—å·åˆ†å‰²

//ä¼ å…¥åŒ¿åå‡½æ•°ï¼Œå®ç°å…ƒç´ ç¿»å€
val newArray2 = arrayOperation(arr, _ * 2)
println(newArray2.mkString(","))
```



2.ä¼ å…¥Int String Char å¦‚æœç­‰äº0 "" '0'åˆ™è¿”å›false å¦åˆ™è¿”å›true

ä½¿ç”¨å‡½æ•°åµŒå¥—å†™æ³•

```SCALA
package chapter05

object Test08_Practice {
  def main(args: Array[String]): Unit = {
    def f1(a : Int) : String => (Char=>Boolean) = {
      def f2(b : String) : Char => Boolean= {
        def f3(c :Char) : Boolean = {
          if(a == 0 && b == "" && c == '0' ) false else true
        }
        f3
      }
      f2
    }

    val rt1 = f1(0)("")('0')
    println(rt1)
    val rt2 = f1(1)("123")('0')
    println(rt2)
  }
}
```



åŒ¿åå‡½æ•°å†™æ³•(é—­åŒ…)

```SCALA
def f11(a1: Int): String => (Char => Boolean) = {
  b1 => c1 => if (a1 == 0 && b1 == "" && c1 == '0') false else true
}

val r1 = f11(0)("")('0')
println(r1)
val r2 = f11(1)("123")('0')
println(r2)
```



æŸ¯é‡ŒåŒ–å†™æ³•

```scala
def func2(i : Int)(s : String)(c : Char):Boolean = {
	if (i == 0 && s == "" && c == '0') false else true
}
```



# å‡½æ•°æŸ¯é‡ŒåŒ–&é—­åŒ…

## é—­åŒ…

é—­åŒ…ï¼šä¸€ä¸ªå‡½æ•°ï¼Œè®¿é—®äº†å®ƒçš„å¤–éƒ¨(å±€éƒ¨)å˜é‡çš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å’Œä»–æ‰€å¤„çš„ç¯å¢ƒï¼Œå«åšé—­åŒ…





![image-20220813115750573](picture/image-20220813115750573.png)

å› ä¸ºåœ¨Scalaé‡Œï¼Œæ¯ä¸ªå‡½æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä¸€äº›ç¯å¢ƒ å’Œ ä¸€äº›å‚æ•° ä¼šæ”¾ç½®åœ¨å †é‡Œ

ä¸ä¼šå—æ ˆé‡Œçš„å› ä¸ºå‡½æ•°é€€å‡ºäº†çš„å½±å“



```scala
//0. ä¸¤ä¸ªåŠ æ•°çš„åœºæ™¯
def add(a : Int, b : Int): Int = {
  a + b
}

//1. è€ƒè™‘å›ºå®šä¸€ä¸ªåŠ æ•°çš„åœºæ™¯
def addByFour( b : Int ) : Int = b + 4

//2. æ‰©å±•åŠ æ•°æ”¹å˜çš„æƒ…å†µ
def addByFive( b : Int ) : Int = b + 5

//3. å°†å›ºå®šåŠ æ•° ä½œä¸ºå¦ä¸€ä¸ªå‚æ•°ä¼ å…¥ ä½†æ˜¯æ˜¯ä½œä¸º"ç¬¬ä¸€å±‚å‚æ•°"ä¼ å…¥ ã€é—­åŒ…å†™æ³•ã€‘

def addBy(a : Int) : Int => Int = {
  def addB1(b: Int): Int = {
    a + b
  }
  addB1
}

//é—­åŒ…çš„ä½¿ç”¨
val addByFour4 = addBy(4) //å…ˆå†™ç¬¬ä¸€å±‚
println(addByFour4(5)) // 4 + 5
val addByFive5 = addBy(5) //å…ˆå†™ç¬¬ä¸€å±‚
println(addByFive5(4)) // 5 + 4
```



è¿™æ ·å†™ é€‚ç”¨æ€§ä¼šæ›´å¹¿æ³›

æ”¹å†™ä¸ºlambdaè¡¨è¾¾å¼

```scala
def addByLambda(a : Int):Int => Int = a + _

val addByFour1 = addByLambda(4)
println(addByFour1(5)) // 4 + 5
println(addByFour1(-3)) // 4 - 3
```



## å‡½æ•°æŸ¯é‡ŒåŒ–

å‡½æ•°æŸ¯é‡ŒåŒ–ï¼šæŠŠä¸€ä¸ªå‚æ•°åˆ—è¡¨çš„å¤šä¸ªå‚æ•°ï¼Œå˜æˆå¤šä¸ªå‚æ•°åˆ—è¡¨

```scala
def addByCurry(a: Int)(b : Int) : Int = a + b
println(addByCurry(12)(28))
```



# é€’å½’

ä¸€ä¸ªå‡½æ•°/æ–¹æ³•åœ¨å‡½æ•°/æ–¹æ³•ä½“å†…åˆè°ƒç”¨äº†æœ¬èº«ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºé€’å½’è°ƒç”¨

```scala
package chapter05

object Test10_Recursion {
  def main(args: Array[String]): Unit = {
    // è®¡ç®—é˜¶ä¹˜
    def fact(a : Int) : Int = {
      if(a == 1) return 1
      a * fact(a - 1)
    }

    println(fact(5))
  }
}
```

é€’å½’è¿˜æ˜¯å°‘ç”¨ï¼Œå› ä¸ºå¯¹æ ˆä¸å‹å¥½ï¼Œå®¹æ˜“StackOverFlow



å°¾é€’å½’ ä¼šè¦†ç›–ä¸Šä¸€å±‚çš„æ ˆ å‡è½»äº†stackçš„å‹åŠ›

```scala
def tailFact(n : Int) : Int = {
  @tailrec //å°¾é€’å½’çš„æ³¨è§£ å¦‚æœä¸ç¬¦åˆè¦æ±‚ ä¼šç¼–è¯‘ä¸é€š
  def loop(n : Int, currtRes : Int): Int = {
    if(n == 0) return currtRes
    loop(n-1, n * currtRes)
  }
  loop(n, 1)
}
```



![image-20220813133906827](picture/image-20220813133906827.png)



# æ§åˆ¶æŠ½è±¡

## ä¼ å€¼å‚æ•°

```scala
//ä¼ å€¼å‚æ•°
def f0(a : Int) : Unit = {
  println("a:" + a)
  println("a:" + a)
}

def f1() : Int = {
  println("f1è°ƒç”¨")
  12
}

f0(f1)
```

æ­¤æ—¶è¾“å‡º

```
f1è°ƒç”¨
a:12
a:12
```



## ä¼ åå‚æ•°

ä¼ é€’çš„ä¸å†æ˜¯å…·ä½“çš„å€¼ï¼Œè€Œæ˜¯ä»£ç å—

```scala
//ä¼ åå‚æ•° ï¼š ä¼ é€’çš„ä¸å†æ˜¯å…·ä½“çš„å€¼ï¼Œè€Œæ˜¯ä»£ç å—
def f2 (a : =>Int):Unit = { // =>Intè¡¨ç¤ºä¸€æ®µä»£ç å—ï¼Œå¹¶ä¸”ä»£ç å—çš„è¿”å›å€¼è¦æ˜¯Int
  println("a:" + a)
  println("a:" + a)
}
f2(23)
f2( f1() )
```



æ­¤æ—¶è¾“å‡º

```
a:23
a:23
f1è°ƒç”¨
a:12
f1è°ƒç”¨
a:12
```

f1çš„æ‰§è¡Œæ¬¡æ•°ï¼Œå†³å®šäºè¿™ä¸ªä¼ åå‚æ•°ï¼Œè°ƒç”¨äº†å‡ æ¬¡

æ¯è°ƒç”¨ä¸€æ¬¡å°±ä¼šæ‰§è¡Œä¸€æ¬¡f1

# ç»¼åˆç»ƒä¹ ï¼šè‡ªå®ç°Whileå¾ªç¯

```SCALA
def main(args: Array[String]): Unit = {
  var n = 10
  //1.å¸¸è§„çš„whileå¾ªç¯
  while (n >= 1){
    println(n)
    n -= 1
  }

  //2.ç”¨é—­åŒ…å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå½“ä»£ç å—ä½œä¸ºå‚æ•°ä¼ å…¥
  def myWhile(condition : =>Boolean) : (=>Unit)=>Unit = {
    //å†…å±‚å‡½æ•° éœ€è¦é€’å½’è°ƒç”¨,å‚æ•°å°±æ˜¯å¾ªç¯ä½“
    def doLoop(op: =>Unit) : Unit = {
      if(condition){
        op
        myWhile(condition)(op)
      }
    }
    doLoop _
  }
  n = 10
  myWhile(n >= 1){
    println(n)
    n-=1
  }

  //3.ç”¨åŒ¿åå‡½æ•°å®ç°
  def myWhile2(condition : =>Boolean) : (=>Unit)=>Unit = {
    //å†…å±‚å‡½æ•° éœ€è¦é€’å½’è°ƒç”¨,å‚æ•°å°±æ˜¯å¾ªç¯ä½“
    op => {
      if(condition){
        op
        myWhile2(condition)(op)
      }
    }
  }

  n = 10
  myWhile2(n >= 1){
    println(n)
    n-=1
  }

  //4.ç”¨æŸ¯é‡ŒåŒ–å®ç°
  def myWhile3(condition : =>Boolean)(op: => Unit) : Unit = {
    //å†…å±‚å‡½æ•° éœ€è¦é€’å½’è°ƒç”¨,å‚æ•°å°±æ˜¯å¾ªç¯ä½“
    if(condition){
      op
      myWhile3(condition)(op)
    }
  }

  n = 10
  myWhile3(n >= 1){
    println(n)
    n-=1
  }
}
```



# æƒ°æ€§åŠ è½½

å½“**å‡½æ•°è¿”å›å€¼è¢«å£°æ˜ä¸º** **lazy** **æ—¶**ï¼Œå‡½æ•°çš„**æ‰§è¡Œå°†è¢«æ¨è¿Ÿ**ï¼Œç›´åˆ°æˆ‘ä»¬é¦–æ¬¡å¯¹æ­¤å–å€¼ï¼Œè¯¥å‡½æ•°æ‰ä¼šæ‰§è¡Œã€‚è¿™ç§å‡½æ•°æˆ‘ä»¬ç§°ä¹‹ä¸ºæƒ°æ€§å‡½æ•°ã€‚



```SCALA
object Test13_LazyLoading {
  def main(args: Array[String]): Unit = {
    lazy val result : Int = sum(13, 47)

    println("1.å‡½æ•°è°ƒç”¨")
    println("2.result = " + result)
  }

  def sum(a:Int, b:Int) : Int = {
    println("3.SUMè°ƒç”¨")
    a + b
  }
}
```

è¾“å‡º

```
1.å‡½æ•°è°ƒç”¨
3.SUMè°ƒç”¨
2.result = 60
```



