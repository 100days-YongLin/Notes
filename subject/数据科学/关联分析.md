# 关联分析

## 是什么

购物篮分析：顾客在交易中购买了A产品会买B产品 这件事的分析



表示如图所示：

**事务数据库：**

| TID  | 项集             |
| ---- | ---------------- |
| 1    | A，C，D，F       |
| 2    | A，B，D，E，F，G |
| 3    | A，B，C，D       |
| 4    | C，D，E，F       |
| 5    |                  |

解释：顾客1买了 A，C，D，F 等等



关联分析的数据表示

| 事务标识 | 项目 |      |      |      |      |      |      | AB   | EFG   |
| -------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ----- |
| TID      | A    | B    | C    | D    | E    | F    | G    | A✖️B  | E✖️F✖️G |
| 1        | 1    | 0    | 1    | 1    | 0    | 1    | 0    | 0    | 0     |
| 2        | 1    | 1    | 0    | 1    | 1    | 1    | 1    | 1    | 1     |
| 3        | 1    | 1    | 1    | 1    | 0    | 0    | 0    | 1    | 0     |
| 4        | 0    | 0    | 1    | 1    | 1    | 1    | 0    | 0    | 0     |
| 5        | 0    | 0    | 0    | 0    | 0    | 0    | 0    | 0    | 0     |
| ∑=count  | 3    | 2    | 3    | 4    | 2    | 3    | 1    | 2    | 1     |
| 支持度   | 0.4  | 0.4  | 0.6  | 0.8  | 0.4  | 0.6  | 0.2  | 0.4  | 0.2   |



## 名词解释

**项目**：商品或名称，例如尿布、啤酒

**项目集/项集**：一个及一个以上项目的集合



项目是变量，用A，B，C表示，也会当项目集。项目集是集合，用X，Y表示



**k-项集**：包含k个项目的集合。ABCDE是 5-项集

**空项集**：没有项目的集合

**事务标识**：TID，顾客的标记，数据框的行

**事务**：顾客的标记，交易记为1

**零事务**：没有交易的事务，记为0

**支持度**：项集X={A}的支持度，#表示事务 （Support）

Support(A) = S(A) = {A=1事务的数目}/{所有事务的数目}

Support({A, B}) = S(AB) = {A=1 且 B=1 的事务的数目} / {所有事务的数目}

S(A) >= S(AB) 项集的项目越多，支持度越小



**子项集与超项集**：

项集X, Y X属于Y 

则X称为Y的子项集

Y称为X的超项集



S(子项集) >= S(超项集)



**支持度阈/最小支持度**：支持度门槛值 Minsupport

**频繁项集**：支持度大于最小支持度的项集

所有频繁项集的子项集合都是频繁项集

所有非频繁项集合的超项集，都是非频繁项集



## 关联规则

**定义**

两个项集：X，Y

X，Y没有共同的项集，则项集X、Y的关联规则 X -> Y

X称为Y规则的前项 或 先导

Y称为X规则的后项 或 后继



**测量**

**支持度Support**：X -> Y的支持度：此规则的有用性 S(X->Y) = S(Y->X) = S(X U Y)

**置信度Confidence**：X ->Y的置信度：规则前项 后项 的可信度或确定性 P (顾客买Y|顾客买X)

**提升度Lift**：X ->Y的提升度：顾客买X带给购买Y信息的提升度 Lift(X->Y)=L(X->Y)=C(X->Y)/S(Y)

**支持度阈**：支持度门槛值 Min_support

**置信度阈**：置信度门槛值

通常支持度要大于0.1，置信度要大于0.1 或 0.2 提升度要大于1.项目变多的时候，支持度会变小

**强关联规则**

Support(X->Y) > Min_support

Confidence(X->Y) > Min_confidence

Lift(X->Y)=Lift(Y->X)



